## Protocol Elaboration

*Note:* **CL == client, SV == server**

### Logging in
1) CL Request
Client sends over their name
```
RequestType: NAME
Required Fields: name
```

2. SV Response
Server responds with a greeting message
```
ResponseType: GREETING
Require Fields: message -- this is just a greeting message to the client, 
				menuoptions -- these are the menu options the client has, 
				next = MENU
```

### View Leader Board (from main menu)
CL Request
Clients wants the leaderboard
```
RequestType: LEADERBOARD
Required Fields: *none*
```
SV Response
Server responds with a repeated field of all past players
```
ResponseType: LEADERBOARD
Required Fields: leader (repeated field) including everyone on the leaderboard, 
				 next = MENU
```
### Play Game (from main menu)
Client wants a game to be started/joined
CL Request
```
RequestType: START
Required Fields: *none*
```
SV Response
Server responds with the information specifying if the game is joined or started and the current game board
```
ResponseType: START
Required Fields: joined -- true/false, 
				 board,
				 next = TILE
```
CL Request
While in game the client sends a row and column request, which includes the row and column as ints. 
```
RequestType: ROWCOL
Required Fields: row, 
				 column
```
SV Response
```
if game is not yet won the current board will be send and the eval field which will be true or false depending if a ship was hit. 

	ResponseType: PLAY
	Required Fields: board, 
					 eval, 
					 next = TILE

OR if game is won/lost the current finished board will be send and eval will specify that the game is won

	ResponseType: DONE
	Required Fields: board, 
					 eval = WON/LOST
					 points -- only when won
					 next = MENU
```
*Repeat ROWCOl request until game is finished or quit*

### Exit (from main menu or user typed 'exit' while in game)
1. CL Request
```
RequestType: QUIT
Required Fields: *none*
```
2. SV Response
```
ResponseType: BYE
Required Fields: message -- a goodbye message from the server
```

### Errors
*These can be generated by any malformed or unexpected request. The client*
*is responsible for keeping track of state to continue.*

SV Response
```
ResponseType: ERROR
RequiredFields: message (description of error), 
				type -- is a number as specified below
				next -- should tell the Client what is expected next, so the Client can use this field to figure out which request is needed by the server
				board -- if in game mode should include the current board
				menuoptions -- if in menu should include the menu options
```
Some error types to use:
1 - required field missing (for any request) -- in message name the field
2 - request not supported (for any request) -- in message name the request that is not supported
3 - row or col out of bounds (response to ROWCOL)
4 - request is not expected at this point (for any request)
0 - any other errors, in this case the message will just be displayed

*NOTE: The client should display the error message that is sent by the server so the client can display it to the player.*